@using Telerik.Web.Mvc.UI
@using Era_sphere.Areas.AreaEmpleados.Models
@model IEnumerable<Empleado>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="block big" style="position: relative">
    <!-- Block Begin -->
    <div class="titlebar">
        <h3>
            Mantenimiento de Empleados
        </h3>
    </div>
    <div class="block_cont">

    <div class = "form">
    <p>
    <button class="t-button t-state-default submit" id="agregarEmpleado"> Agregar Empleado </button>
    </p>
    </div>
 
  @(Html.Telerik().Grid(Model)
        .Name("EmpleadosGrid")
        .Editable(editing => editing
                            .Mode(GridEditMode.InLine))
        .DataKeys(key => key.Add(c => c.ID))
        .Columns(columns =>
        {
            
            columns.Bound(p => p.nombre);
            columns.Bound(p => p.apellido_paterno);
            columns.Bound(p => p.apellido_materno);
            
            
            columns.Command(commands =>
            {
                commands.Edit().ButtonType(GridButtonType.Image);
                commands.Delete().ButtonType(GridButtonType.Image);
            });
        })

        .Pageable()
        .Sortable()


        .DataBinding(dataBinding => dataBinding
            .Ajax()
            .Select("Select", "Empleado")
            .Insert("Insert", "Empleado")
            .Delete("Delete", "Empleado")
            .Update("Update", "Empleado")
        )
    )


   
    <div id="dialogEditar" class="ui-dialog-content ui-widget-content" style="width: auto; min-height: 46px; height: auto; display:none" scrolltop="0" scrollleft="0">
	
    <div id="main" class="container_12" ><!-- Body Wrapper Begin -->
		<div id="body">
			
            <div class="block big" style="position: relative;">
           
            <!-- Block Begin -->
				<div class="titlebar">
					<!--
					<h3>Mantenimento de Cliente</h3>
					-->
				</div>
				<form id = "formEmpleado" class="form" action="#">
				
                <div class="block_cont">
                	<div  id="datos_personales">
						<div class="titlebar innertitle">
							<h3>Datos Personales</h3>
						</div>
						<div class="block_cont">
							<div class="form_row" >
								<label> Cargo: </label>
								<input class="input validate[required] tipRight" maxlength = 50 required type="text" style="width:300px;" name="nombre_cargo" id="nombre_cargo"/>
                            </div>
							<div id="cliente_natural_form">
							<!-- empieza natural -->
							<div class="form_row">
							<label>Nombres(*):</label>
							<input class="input validate[required] tipRight" maxlength = 50 type="text" style="width:300px;" name="nombre_cliente" id="nombre_cliente"/>
							</div>
							<div class="form_row">
							<label> Apellido Paterno(*):</label>
							<input class="input validate[required] tipRight" maxlength = 50 type="text" style="width:300px;" name="apellido_paterno" id="apellido_paterno"/>
							</div>
							<div class="form_row">
							<label> Apellido Materno(*):</label>
							<input class="input validate[required] tipRight" maxlength = 50 type="text" style="width:300px;" name="apellido_materno" id="apellido_materno"/>
							</div>
							<div class="form_row">
							
                            <label> Pais:</label>
							<input class="input tipRight" type="text" maxlength = 50 style="width:300px;" name="pais" id="pais"/>
							</div>
							<!--
                            <div class="form_row">
							<label> Ciudad:</label>
							<input class="input tipRight" type="text" style="width:300px;" name="ciudad" id="ciudad"/>
							</div>
							<div class="form_row">
							<label> Distrito:</label>
							<input class="input tipRight" type="text" style="width:300px;" name="distrito" id="distrito"/>
							</div>
                            -->
                            
                            <!-- 
                             Si se aumenta 1, el top debe bajar en top / 2
                            -->
							<div class="form_row">
							<label> Direccion:</label>
							<input class="input tipRight" maxlength = 80 type="text" style="width:400px;" name="direccion" id="direccion"/>
							</div>
							<div class="form_row">
							<label> Correo Electronico:</label>
							<input class="input tipRight" maxlength = 80 type="text" style="width:400px;" name="email" id="email"/>
							</div>
							<div id="right_form_natural" style = "top:-400px">
								<!--
                                <div id="natural_foto">
								<label> Foto: </label>
								<img src="#" alt="exm" height=150 width=150/>
								</div>
                                -->
								<div id="natural_div_extra"> 
									<!--
                                    <div class="form_row">
									<label> Ruc: </label>
									<input class="input tipRight" type="text" style="width: 300px;" name="ruc" id="ruc"/> 
									</div>
									-->
                                    <div class="form_row">
                                    <label> Perfil: </label>
									<select name="perfil" id = "perfil" class="select" style="width: 300px;">
										
									</select>
									</div>

                                    <div class="form_row">
                                    <label> Tipo Documento: </label>
									<select name="tipo_documento_natural" class="select" style="width: 300px;">
										<option value="dni"> DNI </option>
										<option value="pasaporte"> Pasaporte </option>
									</select>
                                    </div>

									<div class="form_row">
									<label> Nro Documento: </label>
									<input name="nro_documento_natural" class="input tipRight" type="number" style="width: 300px"/>
									</div>
									<div class="form_row">
									<label> Fecha de Nacimiento </label>
									<input class="input validate[required] tipTop" id="fecha_nacimiento" type="date" style="width: 290px;" name="inputtext" placeholder="" original-title=".tipTop - top tooltip by tipsy">
									</div>
									<div class="form_row">
									<label> Telefono: </label>
									<input name="telefono_natural" type = "text"  maxlength = 12 class="input tipRight"  style="width: 300px"/>
									</div>
									<div class="form_row">
									<label> Celular: </label>
									<input name="celular_natural"  type = "text"  maxlength = 12 max="9999999999" class="input tipRight"  style="width: 300px"/>
									</div>

								</div>
							</div><!-- termina natural -->
						</div>
					</div>
				</div>
					<div id="info_adicional">
					<div class="small-inner" id="detalle_cliente"style="margin-top: 10px;">
						<div class="titlebar innertitle">
							<h3>Detalle del Trabajo</h3>
						</div>
						<div class="block_cont">
							<div class="form_row" id="estado_cliente">
							<label> Estado: </label>
							<select name="estado" class="select">
								<option value="activo"> ACTIVO </option>
								<option value="noactivo"> NO ACTIVO </option>
							</select>
							</div>
							<div class="form_row">
							<label> Horario: </label>
                                <p>&nbsp;L &nbsp;&nbsp; M &nbsp;&nbsp; M &nbsp;&nbsp; J &nbsp;&nbsp; V &nbsp;&nbsp;&nbsp; S &nbsp;&nbsp;&nbsp; D</p> 
							    <input type = "checkbox" id = "chklunes" />
                                <input type = "checkbox" id = "chkmartes" />
                                <input type = "checkbox" id = "chklmiercoles" />
                                <input type = "checkbox" id = "chkljueves" />
                                <input type = "checkbox" id = "chklviernes" />
                                <input type = "checkbox" id = "chklsabado" />
                                <input type = "checkbox" id = "chkldomingo" />
							</div>
                            <div class="form_row">
							<label> Horario Entrada: </label>
                                <p>&nbsp;L &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; M &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; M &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; S &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D</p> 
							    <input id="lunesTimeIn" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="martesTimeIn" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="miercolesTimeIn" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="juevesTimeIn" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="viernesTimeIn" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="sabadoTimeIn" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="domingoTimeIn" class="input tipRight" type="text" style="width: 35px"/>
							</div>
                             <div class="form_row">
							<label> Horario Salida: </label>
                                <p>&nbsp;L &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; M &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; M &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; S &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D</p> 
							    <input id="lunesTimeOut" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="martesTimeOut" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="miercolesTimeOut" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="juevesTimeOut" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="viernesTimeOut" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="sabadoTimeOut" class="input tipRight" type="text" style="width: 35px"/>
                                <input id="domingoTimeOut" class="input tipRight" type="text" style="width: 35px"/>
							</div>
                            <!--
                                    <div class="form_row">
									<label> Cvitae: </label>
									<input name="telefono_natural" class="input tipRight" type="text" style="width: 300px"/>
									</div>
                            -->
									<div class="form_row">
									<label> Sueldo: </label>
									<input name="celular_natural" class="input tipRight" type="text" style="width: 300px"/>
									</div>
						</div>
					</div>
					<div class="small-inner" id="cuenta_usuario" style="margin-top: 10px; width:400px">
						<div class="titlebar innertitle">
							<h3>Cuenta de usuario</h3>
						</div>
						<div class="block_cont">
						<div class="form_row">
						<label> Usuario:</label>
						<input name="usuario" type="text" class="input" style="width:300px;"/>
						</div>
						<div class="form_row">
						<label> Password:</label>
						<input name="usuario" type="password" class="input" style="width:300px;"/>
						</div>
						<div class="form_row">
						<label> Repetir Password:</label>
						<input name="usuario" type="password" class="input" style="width:300px"/>
						</div>
						</div>
					</div>
					</div>
				 </div>
				</form>
			</div><!-- Block End -->
		</div>
	</div>
    			
	</div> <!-- Fin editar -->

   
    </div>
 <!-- para el modal amplio ftw!! -->
 <div id="mask" style="width: 1263px; height: 900px; display: none; opacity: 0.8; "></div>
 
</div>

    
<script type = "text/javascript">
  
   //cargar Paises
     $("#pais").autocomplete({  
           source: function(req, add){  
            var jsonPais = {
                    pais: $("#pais").val(),
                };
            $.ajax({
            type: "POST",
            data: JSON.stringify(jsonPais),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "../AreaConfiguracion/Ubigeo/DamePaises",
            success: function (data) {
            var suggestions = []; 
                $.each(data, function (i, item) {
                    suggestions.push(item.Nombre);
                });
                add(suggestions);
            }
        });
              
        },  
  
        /*
        //define select handler  
        select: function(e, ui) {  
  
            //create formatted friend  
            var friend = ui.item.value,  
                span = $("<span>").text(friend),  
                a = $("<a>").addClass("remove").attr({  
                    href: "javascript:",  
                    title: "Remove " + friend  
                }).text("x").appendTo(span);  
  
                //add friend to friend div  
                span.insertBefore("#to");  
            },  
  
            //define select handler  
            change: function() {  
  
                //prevent 'to' field being updated and correct position  
                $("#to").val("").css("top", 2);  
            }  
            */
        });  
   
    //hacemos el Ajax para llenar los perfiles
    $.ajax({
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "../AreaConfiguracion/Perfiles/Select",
            success: function (data) {
                var result = "";
                $.each(data["data"], function (i, item) {
                    var nombre = item.nombrePerfil;
                    //<option value="dni"> DNI </option>
                   result += '<option  value = "' + i + '">' + nombre + '</option>';
                });
                $("#perfil").html(result);
                
            }
        });

    //Fin Ajax


    $('#fecha_nacimiento').datepicker({
        dateFormat: 'dd/mm/yy', changeMonth: true, changeYear: true, yearRange: '-120:+0'
    });

    $('#lunesTimeIn').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#martesTimeIn').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#miercolesTimeIn').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#juevesTimeIn').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#viernesTimeIn').timepicker({
        hourGrid: 4,
        stepMinute: 10
    });

    $('#sabadoTimeIn').timepicker({
        hourGrid: 4,
        stepMinute: 10
    });
    $('#domingoTimeIn').timepicker({
        hourGrid: 4,
        stepMinute: 10
    });

    $('#lunesTimeOut').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#martesTimeOut').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#miercolesTimeOut').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#juevesTimeOut').timepicker({
        hourGrid: 4,
        stepMinute: 10,
    });

    $('#viernesTimeOut').timepicker({
        hourGrid: 4,
        stepMinute: 10
    });

    $('#sabadoTimeOut').timepicker({
        hourGrid: 4,
        stepMinute: 10
    });
    $('#domingoTimeOut').timepicker({
        hourGrid: 4,
        stepMinute: 10
    });
    

    $("#agregarEmpleado").click(function () {
        //ajax
        $("#mask").show();
        $('#dialogEditar').dialog('open');
   
   });

    $('#dialogEditar').dialog({
        autoOpen: false,
        resizable: false,
        draggable: false,
        width: 1000,
        modal: true,
        title: "Agregar Empleado",
        position: "top",
        buttons: {
            "Aceptar": function () {
                 
               var jsonCliente  = armaEntrada();
                 

                /*
                var jsonMenu = {
                    nombre: $("#nombre").val(),
                    descripcion: $("#descripcion").val(),
                    lista: "111"
                };
                $.ajax({
                    type: "POST",
                    data: JSON.stringify(jsonMenu),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    url: "Empleados/nuevoEmpleado",
                    success: function (data) {
                        if (data.me == "") {
                            $('#EmpleadosGrid').data('tGrid').ajaxRequest();

                        }
                    }
                });
                */
                //$(this).dialog("close");
            },
            "Cancelar": function () {
                $("#mask").hide();
                $(this).dialog("close");
            }
        }
    });


    function armaEntrada(){
       /*
        var Persona = {
            
        };

        var jsonEmpleado {
        

        };
        */
        return jsonEmpleado;
    }



    function validaFormulario(){
        //var cargo = $("#nombre_cargo").val();
        //var nomcli = $("#nombre_cliente").val();
        //var appat = $("#apellido_paterno").val();
        //var apmat = $("#apellido_materno").val();

    }
</script>