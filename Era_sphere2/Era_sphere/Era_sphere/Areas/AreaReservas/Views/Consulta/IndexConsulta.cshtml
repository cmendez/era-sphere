@using Era_sphere.Areas.AreaReservas.Models
@using Era_sphere.Areas.AreaHoteles.Models
@using Era_sphere.Generics;
@using Telerik.Web.Mvc.UI
@model ConsultaView
@{
    ViewBag.Title = "IndexHotel";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var tipos_habitaciones = (new EraSphereContext()).tipos_habitacion.ToList();
    tipos_habitaciones.Insert(0, new TipoHabitacion { ID = 0, descripcion = "Todos" });
    var pisos = (new EraSphereContext()).pisos.Where(p=>p.hotelID==Model.hotelID).ToList();
    pisos.Insert(0, new Piso { ID = 0, descripcion = "Todos" });
   // var ciudades = (new EraSphereContext()).ciudades.ToList();
   // var estados = (new EraSphereContext()).estados_cliente.ToList();
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="block big" style="position: relative">
    <!-- Block Begin -->
    <div class="titlebar">
        <h3>
           Consulta Habitaciones
        </h3>
    </div>
    
    <div class="block_cont">
    @using (Html.BeginForm("Buscar", "Consulta")){
      @Html.ValidationSummary(true)
        <fieldset>

        <div class="editor-label"> @Html.LabelFor(model => model.fecha_inicio) </div>
        <div class="editor-field"> @Html.Telerik().DatePickerFor(model => model.fecha_inicio) </div>
 

        <div class="editor-label"> @Html.LabelFor(model => model.fecha_fin) </div>
        <div class="editor-field"> @Html.Telerik().DatePickerFor(model => model.fecha_fin) </div>

        <div class="editor-label"> @Html.LabelFor(model => model.pisoID) </div>
          @( Html.Telerik().ComboBox()
                    .Name("pisoID")
                    .BindTo(new SelectList(pisos, "ID", "descripcion"))
                    .SelectedIndex(0)  
                )

        <div class="editor-label"> @Html.LabelFor(model => model.tipo_habitacionID) </div>
          @( Html.Telerik().ComboBox()
                    .Name("tipo_habitacionID")
                    .BindTo(new SelectList(tipos_habitaciones, "ID", "descripcion"))
                    .SelectedIndex(0)
                )

        <div class="editor-label"> @Html.LabelFor(model => model.habitaciones_libres_total) </div>
        <div class="editor-field"> @Html.TextBoxFor(model => model.habitaciones_libres_total, new {@readonly = "readonly"}) </div>
        
        <div class="editor-label"> @Html.LabelFor(model => model.habitaciones_libres_piso) </div>
        <div class="editor-field"> @Html.TextBoxFor(model => model.habitaciones_libres_piso, new { @readonly = "readonly" }) </div>

        <div class="editor-label"> @Html.LabelFor(model => model.habitaciones_libres_tipo) </div>
        <div class="editor-field"> @Html.TextBoxFor(model => model.habitaciones_libres_tipo, new { @readonly = "readonly" }) </div>

        @Html.HiddenFor(model => model.hotelID)
        </fieldset>
        <button type="submit" id="buscar-cliente-submit">Buscar</button>
    }

     <div style="height: 10px;">
    </div>
  <div style="height: 10px;">
    </div>

   


        @(Html.Telerik().Grid(Model.resultados)
        .Name("ConsultaGrid")
        .Localizable("es-ES")
       
        .DataKeys(key =>key.Add(c=>c.habitacionID))
        .Columns(columns =>
        {
            columns.Bound(p => p.numero_habitacion);
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(tipos_habitaciones, "ID", "descripcion"));
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(tipos_habitaciones, "ID", "numero_camas")).Title(@"Número de camas");
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(tipos_habitaciones, "ID", "costo_base")).Title("Precio");
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(tipos_habitaciones, "ID", "cap_max_personas")).Title("Capacidad");
            
        })

        .Pageable()
        .Sortable()
             
        )
           

    </div>


   
    <!-- Table Wrapper End -->
</div>


