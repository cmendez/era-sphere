@using Era_sphere.Areas.AreaReservas
@using Era_sphere.Generics;
@using Telerik.Web.Mvc.UI
@model ReservaView
@{
    ViewBag.Title = "IndexHotel";
    var habitaciones = (new EraSphereContext()).tipos_habitacion.ToList();
    //asi funciono con las consultas >.<
    var pisos = (new EraSphereContext()).pisos.Where(p => p.hotelID == Model.hotelID).ToList();
    
   // var ciudades = (new EraSphereContext()).ciudades.ToList();
   // var estados = (new EraSphereContext()).estados_cliente.ToList();
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="block big" style="position: relative">
    <!-- Block Begin -->
    <div class="titlebar">
        <h3>
           Consulta Habitaciones
        </h3>
    </div>
    
    <div class="block_cont">
    @using (Html.BeginForm("Buscar", "Consulta")){
      @Html.ValidationSummary(true)
        <fieldset>

        <div class="editor-label"> @Html.LabelFor(model => model.check_in) </div>
        <div class="editor-field"> @Html.Telerik().DatePickerFor(model => model.check_in) </div>
 

        <div class="editor-label"> @Html.LabelFor(model => model.check_out) </div>
        <div class="editor-field"> @Html.Telerik().DatePickerFor(model => model.check_out) </div>

        <div class="editor-label"> @Html.LabelFor(model => model.pisoID) </div>
          @( Html.Telerik().ComboBox()
                    .Name("pisoID")
                    .BindTo(new SelectList(pisos, "ID", "descripcion"))
                    
                )


        <div class="editor-label"> @Html.LabelFor(model => model.num_habitaciones) </div>
        <div class="editor-field"> @Html.TextBoxFor(model => model.num_habitaciones)</div>

      
        
        </fieldset>

        <input type="submit" id="buscar-cliente-submit" value="Buscar" />
    }

     <div style="height: 10px;">
    </div>
  <div style="height: 10px;">
    </div>

   


        @(Html.Telerik().Grid(Model.resultados)
        .Name("ConsultaGrid")
        .Localizable("es-ES")
       
        .DataKeys(key =>key.Add(c=>c.habitacionID))
        .Columns(columns =>
        {
            columns.Bound(p => p.numero_habitacion);
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(habitaciones, "ID", "descripcion"));
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(habitaciones, "ID", "numero_camas")).Title(@"Número de camas");
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(habitaciones, "ID", "costo_base")).Title("Precio");
            columns.ForeignKey(p => p.tipo_habitacionID, new SelectList(habitaciones,"ID", "cap_max_personas")).Title("Capacidad");
            
        })

        .Pageable()
        .Sortable()
             
        )
           

    </div>


   
    <!-- Table Wrapper End -->
</div>


