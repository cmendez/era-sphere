@using Era_sphere.Areas.AreaReservas
@using Era_sphere.Generics
@using Telerik.Web.Mvc.UI
@model ReservaView
@{
    ViewBag.Title = "Servicios De Reserva";
    EraSphereContext context = new EraSphereContext();
    var tipos_servicios = context.tipo_servicios.ToList();
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="block big" style="position: relative">
    <!-- Block Begin -->
    <div class="titlebar">
        <h3>
            Mantenimiento de servicios de reserva
        </h3>
    </div>
    <div class="block_cont">
       @(Html.Telerik().Grid(Model.servicios)
        .Name("ServiciosReservaGrid")
        .Localizable("es-ES")
        .Filterable()
        .ToolBar(commands => commands.Insert())
        .Editable(editing => editing
                            .Mode(GridEditMode.PopUp)
                            .TemplateName("ClienteJuridicoViewTemplate"))

        .DataKeys(key => key.Add(c => c.ID))
        .Columns(columns =>
        {
            columns.Bound(p => p.ID);
            columns.Bound(p => p.detalle);
            columns.ForeignKey(p => p.tipo_servicioID, new SelectList(tipos_servicios, "ID", "nombre"));
            columns.Command(commands =>
            {
                commands.Edit().ButtonType(GridButtonType.Image);
                commands.Delete().ButtonType(GridButtonType.Image);
                commands.Custom("mostrar_juridico").Text("Mostrar").
                    DataRouteValues(route => route.Add(o => o.ID).RouteKey("id")).Ajax(true).Action("MostrarJuridicoEvento", "Cliente");

            }).Width(160);
        })

        .Pageable()
        .Sortable()

        .ClientEvents(events => events.OnComplete("onComplete"))
        .DataBinding(dataBinding => dataBinding
            .Ajax().Select("_CustomCommand", "Cliente")
            .Select("SelectJuridico", "Reserva", new { id_reserva = Model.ID })
        )
              .ClientEvents(events => events.OnSave("guardarJuridico"))
           )
    </div>
    
</div>


