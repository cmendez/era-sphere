@using Era_sphere.Areas.AreaReservas
@using Era_sphere.Generics;
@using Era_sphere.Areas.AreaReservas.Models;
@using Telerik.Web.Mvc.UI
@model HabitacionXReservaXClienteView
@{
    ViewBag.Title = "Asignar Huespeded a Habitacion Reservada";
    var habitaciones = (new EraSphereContext()).habitaciones.ToList();
    LogicaReserva logica = new LogicaReserva();
    var habitacionReserva = logica.habitacionesDeReserva(Model.reservaID);
    var clientes = (new EraSphereContext()).clientes.ToList();
    //asi funciono con las consultas >.<
    
    
   // var ciudades = (new EraSphereContext()).ciudades.ToList();
   // var estados = (new EraSphereContext()).estados_cliente.ToList();
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<div class="block big" style="position: relative">
    <!-- Block Begin
    
     -->
    
    <div class="titlebar">
        <h3>
           Asignar Huespeded a Habitacion Reservada
        </h3>
    </div>

    <fieldset>

     <div class="editor-label">
                <label> Habitación </label>
                </div>
                @( Html.Telerik().ComboBox()
                    .Name("habitacionID")
                    .BindTo(new SelectList(habitacionReserva, "ID", "detalle"))
                    .SelectedIndex(0)
                )
        
        
        <div class="editor-label"> @Html.Label("Número camas") </div>
        <div class="editor-field"> @Html.TextBoxFor(model => model.numero_camas,new {@readonly = "readonly"})
        </div>
        
        <div class="editor-label"> @Html.Label("Capacidad") </div>
        <div class="editor-field"> @Html.TextBoxFor(model => model.huespedes_actuales,new {@readonly = "readonly"})
        </div>
    
    
    </fieldset>
     
     <div class="editor-label">
        <button id="mostrar-mant-cliente" class="t-button t-state-default" onclick="showMantCliente();">
               Ir a mantenimiento de clientes
        </button>
     
     </div>

      <div class="editor-label">
            @Html.Label("Cliente")
     
     </div>
    

            <fieldset>
    
                <div class="editor-label">
                    @(Html.Telerik().AutoComplete()
                    .Name("responsable_pago")
                    .DataBinding(binding => binding.Ajax().Select("DameClientes", "../AreaClientes/Cliente"))
                    .HighlightFirstMatch(true)
                    .AutoFill(true).HtmlAttributes(new { style = "width:300px" })
                    )

                </div>
            </fieldset>


     <div class="editor-label">
        <button id="agregar_huesped" class="t-button t-state-default" onclick="showMantCliente();">
               Agregar
        </button>
     
     </div>
    
       



        @(Html.Telerik().Grid(Model.lista_clientes_habitacion)
        .Name("clientesHabitacionGrid")
        .Localizable("es-ES")

                                        .DataKeys(key => {key.Add(c => c.clienteID); })
        .Columns(columns =>
        {
            columns.ForeignKey(p => p.habitacionID, new SelectList(habitaciones, "ID", "detalle")).Title(@"Número de habitacion");
            columns.ForeignKey(p => p.clienteID, new SelectList(clientes, "ID", "nombre")).Title("Nombre");
            columns.ForeignKey(p => p.clienteID, new SelectList(clientes, "ID", "apellido_paterno")).Title("Apellido Paterno");
            columns.ForeignKey(p => p.clienteID, new SelectList(clientes, "ID", "apellido_materno")).Title("Apellido Materno");
            columns.Command(commands =>
                             commands.Delete().ButtonType(GridButtonType.Image));
            
            
        })

        .Pageable()
        .Sortable()
        .DataBinding(dataBinding => dataBinding
        .Ajax()
       // .Select("SelectClienteHabitacion", "Reserva", new { id_reserva = Model.reservaID })
       // .Delete("DeleteClienteHabitacion", "Reserva", new { id_reserva = Model.reservaID })
                                                                

                                                            )
             
        )
           

    </div>


   
    <!-- Table Wrapper End -->
</div>


